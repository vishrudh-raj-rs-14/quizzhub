//- doctype html
//- html(lang='en')
//-   head
//-     meta(charset='UTF-8')
//-     meta(http-equiv='X-UA-Compatible', content='IE=edge')
//-     meta(name='viewport', content='width=device-width, initial-scale=1.0')
//-     link(rel='preconnect', href='https://fonts.googleapis.com')
//-     link(rel='preconnect', href='https://fonts.gstatic.com', crossorigin='')
//-     link(href='https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap', rel='stylesheet')
//-     link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css', integrity='sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==', crossorigin='anonymous', referrerpolicy='no-referrer')
//-     link(rel='stylesheet', href='/css/base.css')
//-     link(rel='stylesheet', href='/css/quiz.css')
//-     link(rel='stylesheet', href='/css/profile.css')
//-     title Profile
//-   body
//-     .main-nav
//-       a(href="/")
//-         .logo QUIZZHUB
//-       .search
//-         .search-inp
//-           input(type='text', placeholder='Search a quiz')
//-         .search-btn
//-           img(src='/img/search (1).png')
//-       .profile-container
//-         i.fa-regular.fa-bell.fa-lg(style='color: #f7f7f7')
//-         if user.profilePic
//-           a(href="/profile")
//-             .profile-pic-c
//-               img(src=`/img/users/${user.profilePic}`)
//-         else
//-           a(href="/profile")
//-             div(style=`background-color :${user.color};`).profile= user.firstName[0].toUpperCase()

//-     .bodyContainer
//-       if canEdit
//-         .modal.modal-off-state
//-           .modal-window
//-             .modal-off
//-               i.fa-solid.fa-xmark.fa-lg(style='color: #f2f2f2')
//-             label(for='pro-pic')
//-               i.fa-solid.fa-download.fa-3x(style='color: #ffffff')
//-               input#pro-pic.pro-pic-get.hidden(type='file', accept='image/*')
//-               |Choose an Image
//-             .pro-sample-c
//-               img#pro-sample.pro-sample.hidden(src='#')
//-             .pro-btns-modal
//-               .next
//-                 button Submit
//-       .profile-sidebar
//-         .profile-info
//-           .profile-pic
//-             if curUser.profilePic
//-               if canEdit
//-                 div
//-                   i.fa-solid.fa-pen-to-square.fa-2x(style='color: #f5f5f5')
//-               img(src=`/img/users/${curUser.profilePic}`)
//-             else
//-               if canEdit
//-                 div
//-                   i.fa-solid.fa-pen-to-square.fa-2x(style='color: #f5f5f5')
//-               if curUser.color
//-                 div(style=`background-color :${curUser.color}`).profile-letter=curUser.firstName[0].toUpperCase()
//-               else 
//-                 div.profile-letter=curUser.firstName[0].toUpperCase()
//-           .name=`${curUser.firstName[0].toUpperCase()}${curUser.firstName.slice(1)} ${curUser.lastName[0].toUpperCase()}${curUser.lastName.slice(1)}`
//-           .sub-name=curUser.email
//-         .profile-tags
//-           .profile-tag Coding
//-           .profile-tag React
//-           .profile-tag Javascript
//-           .profile-tag HTML/CSS
//-           .profile-tag Node/Express
//-         .prof-quiz-details
//-           .quizes-detail-inner
//-             span  Quizes Taken:
//-             |  
//-             span.val=curUser.quizesTaken.length
//-           .quizes-detail-inner
//-             span Quizes Created: 
//-             span.val=`${myQuizes.length}`
//-       .profile-main
//-         .profile-c
//-           .yourQuiz
//-             if canEdit
//-               div(data-val="0").prof-quiz-op.active Taken Quizzes
//-               div(data-val="1").prof-quiz-op Created Quizzes
//-             else
//-               div(data-val="1").elseCan Created Quizzes
//-           if canEdit
//-             div(data-val="0").quiz-container.open
//-               each eval in curUser.quizesTaken
//-                 .quiz-eval-card
//-                   if eval.quiz.user.profilePic
//-                     a(href="/profile")
//-                       .profile-pic-c
//-                         img(src=`/img/users/${eval.quiz.user.profilePic}`)
//-                   else
//-                     a(href="/profile")
//-                       div(style=`background-color :${eval.quiz.user.color};`).profile= eval.quiz.user.firstName[0].toUpperCase()
//-                   .name-dif
//-                     .name=eval.quiz.name
//-                     .diff=eval.quiz.difficulty[0].toUpperCase()+eval.quiz.difficulty.slice(1)
//-                   .marks-time
//-                     .marks=`${eval.score}/${eval.totalScore}`
//-                     .timeSince=`${timeSince(eval.time)} ago`
//-             div(data-val="1").quiz-container
//-               each quiz in myQuizes
//-                 .card.card-prof(data-link=`${quiz._id}`)
//-                   .tags
//-                     each tag in quiz.tags.slice(0,3)
//-                       .tag=tag
//-                   .card-head
//-                     .card-head-text=quiz.name
//-                     //- .card-head-profile
//-                     //-   .profile V
//-                   if quiz.description.length>=450
//-                     .card-content=quiz.description.slice(0,450)+"..."
//-                   else
//-                     .card-content=quiz.description
//-                   hr
//-                   .card-footer
//-                     .card-time=timeSince(quiz.createdAt)
//-                     .card-heart
//-                       img(src='/img/heart2.png')
//-           else
//-             div(data-val="1").quiz-container.open
//-               each quiz in myQuizes
//-                 .card.card-prof(data-link=`${quiz._id}`)
//-                   .tags
//-                     each tag in quiz.tags.slice(0,3)
//-                       .tag=tag
//-                   .card-head
//-                     .card-head-text=quiz.name
//-                     //- .card-head-profile
//-                     //-   .profile V
//-                   if quiz.description.length>=450
//-                     .card-content=quiz.description.slice(0,450)+"..."
//-                   else
//-                     .card-content=quiz.description
//-                   hr
//-                   .card-footer
//-                     .card-time=timeSince(quiz.createdAt)
//-                     .card-heart
//-                       img(src='/img/heart2.png')        
//-       .profile-sidebar.prof2
//-         .side-bar-1
//-           .side-bar-head Recommended
//-           .li-item
//-             img.avatar(src='/img/propic1.jpg')
//-             span  John Smith 
//-           .li-item
//-             img.avatar(src='/img/propic2.jpg')
//-             span  Alex 
//-           .li-item
//-             img.avatar(src='/img/propic3.jpg')
//-             span  Andrea Wilson 
//-           .li-item
//-             img.avatar(src='/img/propic1.jpg')
//-             span  John Smith 
//-           .li-item
//-             img.avatar(src='/img/propic2.jpg')
//-             span  Alex 
//-           .li-item
//-             img.avatar(src='/img/propic3.jpg')
//-             span  Andrea Wilson 
//-           // <div class="li-item"></div>
//-         .side-bar-1
//-           .side-bar-head Friends
//-           .li-item
//-             img.avatar(src='/img/propic1.jpg')
//-             span  John Smith 
//-           .li-item
//-             img.avatar(src='/img/propic2.jpg')
//-             span  Alex 
//-           .li-item
//-             img.avatar(src='/img/propic3.jpg')
//-             span  Andrea Wilson 
//-           .li-item
//-             img.avatar(src='/img/propic1.jpg')
//-             span  John Smith 
//-           .li-item
//-             img.avatar(src='/img/propic2.jpg')
//-             span  Alex 
//-           .li-item
//-             img.avatar(src='/img/propic3.jpg')
//-             span  Andrea Wilson 
//-           // <div class="li-item"></div>
//-     script(src='https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js')
//-     script(src="/js/general.js")
//-     script(src='/js/profile.js', type="module")

extends nav.pug 

block styles 
    link(rel='stylesheet', href='/css/quiz.css')
    link(rel='stylesheet', href='/css/profile.css')
block cont
      if canEdit
        .modal.modal-off-state
          .modal-window
            .modal-off
              i.fa-solid.fa-xmark.fa-lg(style='color: #f2f2f2')
            label(for='pro-pic')
              i.fa-solid.fa-download.fa-3x(style='color: #ffffff')
              input#pro-pic.pro-pic-get.hidden(type='file', accept='image/*')
              |Choose an Image
            .pro-sample-c
              img#pro-sample.pro-sample.hidden(src='#')
            .pro-btns-modal
              .next
                button Submit
      .profile-sidebar
        .profile-info
          .profile-pic
            if curUser.profilePic
              if canEdit
                div
                  i.fa-solid.fa-pen-to-square.fa-2x(style='color: #f5f5f5')
              -let cond=curUser.profilePic && curUser.profilePic.startsWith("http")
              if cond
                  img(src=`${curUser.profilePic}`)
              else 
                  img(src=`/img/users/${curUser.profilePic}`)
              //- img(src=`/img/users/${curUser.profilePic}`)
            else
              if canEdit
                div
                  i.fa-solid.fa-pen-to-square.fa-2x(style='color: #f5f5f5')
              div(style=`background-color :${curUser.color} !important`).profile-letter=curUser.firstName[0].toUpperCase()
          .name=`${curUser.firstName[0].toUpperCase()}${curUser.firstName.slice(1)} ${curUser.lastName[0].toUpperCase()}${curUser.lastName.slice(1)}`
          .sub-name=curUser.email
        .profile-tags
          .profile-tag Coding
          .profile-tag React
          .profile-tag Javascript
          .profile-tag HTML/CSS
          .profile-tag Node/Express
        .prof-quiz-details
          .quizes-detail-inner
            span  Quizes Taken:
            |  
            span.val=curUser.quizesTaken.length
          .quizes-detail-inner
            span Quizes Created: 
            span.val=`${myQuizes.length}`
      .profile-main
        .profile-c
          .yourQuiz
            if canEdit
              div(data-val="0").prof-quiz-op.active Taken Quizzes
              div(data-val="1").prof-quiz-op Created Quizzes
            else
              div(data-val="1").elseCan Created Quizzes
          if canEdit
            div(data-val="0").quiz-container.open
              each eval in curUser.quizesTaken
                .quiz-eval-card
                  if eval.quiz.user.profilePic
                    a(href="/profile")
                      .profile-pic-c
                        -let cond=eval.quiz.user.profilePic && eval.quiz.user.profilePic.startsWith("http")
                        if cond
                          img(src=`${eval.quiz.user.profilePic}`)
                        else 
                          img(src=`/img/users/${eval.quiz.user.profilePic}`)
                        //- img(src=`/img/users/${eval.quiz.user.profilePic}`)
                  else
                    a(href="/profile")
                      div(style=`background-color :${eval.quiz.user.color};`).profile= eval.quiz.user.firstName[0].toUpperCase()
                  .name-dif
                    .name=eval.quiz.name
                    .diff=eval.quiz.difficulty[0].toUpperCase()+eval.quiz.difficulty.slice(1)
                  .marks-time
                    .marks=`${eval.score}/${eval.totalScore}`
                    .timeSince=`${timeSince(eval.time)} ago`
            div(data-val="1").quiz-container
              each quiz in myQuizes
                .card.card-prof(data-link=`${quiz._id}`)
                  .tags
                    each tag in quiz.tags.slice(0,3)
                      .tag=tag
                  .card-head
                    .card-head-text=quiz.name
                    //- .card-head-profile
                    //-   .profile V
                  if quiz.description.length>=450
                    .card-content=quiz.description.slice(0,450)+"..."
                  else
                    .card-content=quiz.description
                  hr
                  .card-footer
                    .card-time=timeSince(quiz.createdAt)
                    .card-heart
                      img(src='/img/heart2.png')
          else
            div(data-val="1").quiz-container.open
              each quiz in myQuizes
                .card.card-prof(data-link=`${quiz._id}`)
                  .tags
                    each tag in quiz.tags.slice(0,3)
                      .tag=tag
                  .card-head
                    .card-head-text=quiz.name
                    //- .card-head-profile
                    //-   .profile V
                  if quiz.description.length>=450
                    .card-content=quiz.description.slice(0,450)+"..."
                  else
                    .card-content=quiz.description
                  hr
                  .card-footer
                    .card-time=timeSince(quiz.createdAt)
                    .card-heart
                      img(src='/img/heart2.png')        
      .profile-sidebar.prof2
        .side-bar-1
          .side-bar-head Recommended
          .li-item
            img.avatar(src='/img/propic1.jpg')
            span  John Smith 
          .li-item
            img.avatar(src='/img/propic2.jpg')
            span  Alex 
          .li-item
            img.avatar(src='/img/propic3.jpg')
            span  Andrea Wilson 
          .li-item
            img.avatar(src='/img/propic1.jpg')
            span  John Smith 
          .li-item
            img.avatar(src='/img/propic2.jpg')
            span  Alex 
          .li-item
            img.avatar(src='/img/propic3.jpg')
            span  Andrea Wilson 
          // <div class="li-item"></div>
        .side-bar-1
          .side-bar-head Friends
          for friend in user.friends
              a(href=`/${friend._id}/profile`).li-item
                  if friend.profilePic
                      img.avatar(src=`/img/users/${friend.profilePic}`)
                  else
                      div(style=`background-color :${friend.color} !important;`).smaller.profile=friend.firstName[0].toUpperCase()
                  span=`${friend.firstName[0].toUpperCase()}${friend.firstName.slice(1)} ${friend.lastName[0].toUpperCase()}${friend.lastName.slice(1)}`
          // <div class="li-item"></div>
          -let c = !user.friends || !user.friends.length
          if c
              .li-item.no-info No Friends
          // <div class="li-item"></div>

block jslink
    script(src='https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js')
    script(src="/js/general.js", type="module")
    script(src='/js/profile.js', type="module")